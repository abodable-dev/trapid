# =============================================================================
# TRAPID BACKEND ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# NEVER commit your .env file with real secrets!
# See ENVIRONMENT_SETUP.md for detailed setup instructions.

# -----------------------------------------------------------------------------
# DATABASE - CRITICAL
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Local development: Use localhost with your database name
# Production: Automatically set by Heroku (do not set manually)
DATABASE_URL=postgresql://localhost/trapid_development

# -----------------------------------------------------------------------------
# RAILS - CRITICAL
# -----------------------------------------------------------------------------
RAILS_ENV=development

# Generate a secret key with: bin/rails secret
# In production, Rails uses encrypted credentials, but this ENV fallback exists
SECRET_KEY_BASE=your_secret_key_here_run_bin_rails_secret_to_generate

# Optional: Puma web server max threads (default: 5)
# RAILS_MAX_THREADS=5

# -----------------------------------------------------------------------------
# FRONTEND URL - REQUIRED FOR OAUTH REDIRECTS
# -----------------------------------------------------------------------------
# The frontend application URL for OAuth callback redirects
# Development: http://localhost:5173
# Production: https://trapid.vercel.app
FRONTEND_URL=http://localhost:5173

# -----------------------------------------------------------------------------
# MICROSOFT ONEDRIVE INTEGRATION
# -----------------------------------------------------------------------------
# Required for: Document storage and management
#
# Setup instructions:
# 1. Go to https://portal.azure.com
# 2. Navigate to "App registrations" → "New registration"
# 3. Name: "Trapid OneDrive Integration"
# 4. Supported account types: "Accounts in any organizational directory and personal Microsoft accounts"
# 5. Redirect URI: Web → {BACKEND_URL}/api/v1/onedrive/callback
# 6. After creation, go to "Certificates & secrets" → "New client secret"
# 7. Go to "API permissions" → "Add permission" → "Microsoft Graph"
#    - Add: Files.ReadWrite.All, offline_access, User.Read
# 8. Copy Application (client) ID and client secret value
#
# More info: https://learn.microsoft.com/en-us/graph/auth-register-app-v2
ONEDRIVE_CLIENT_ID=your_microsoft_app_client_id
ONEDRIVE_CLIENT_SECRET=your_microsoft_app_client_secret
ONEDRIVE_REDIRECT_URI=http://localhost:3000/api/v1/onedrive/callback

# -----------------------------------------------------------------------------
# XERO ACCOUNTING INTEGRATION
# -----------------------------------------------------------------------------
# Required for: Invoice syncing, purchase order matching, payment tracking
#
# Setup instructions:
# 1. Go to https://developer.xero.com/app/manage
# 2. Click "New app" → "OAuth 2.0"
# 3. App name: "Trapid"
# 4. Company/application URL: https://trapid.vercel.app
# 5. Redirect URI: {FRONTEND_URL}/settings/xero/callback
# 6. Enable scopes: accounting.transactions, accounting.contacts
# 7. Copy Client ID and generate Client Secret
#
# More info: https://developer.xero.com/documentation/getting-started-guide/
XERO_CLIENT_ID=your_xero_client_id
XERO_CLIENT_SECRET=your_xero_client_secret
XERO_REDIRECT_URI=http://localhost:5173/settings/xero/callback
XERO_WEBHOOK_KEY=your_xero_webhook_signing_key

# -----------------------------------------------------------------------------
# CLOUDINARY - IMAGE STORAGE
# -----------------------------------------------------------------------------
# Required for: Product image uploads, image scraping, media management
#
# Setup instructions:
# 1. Sign up at https://cloudinary.com (free tier: 25GB storage, 25k transformations/month)
# 2. Go to Dashboard: https://cloudinary.com/console
# 3. Copy Cloud name, API Key, and API Secret
# 4. Free tier is sufficient for development and small production use
#
# More info: https://cloudinary.com/documentation/rails_integration
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# -----------------------------------------------------------------------------
# ANTHROPIC CLAUDE AI
# -----------------------------------------------------------------------------
# Required for: AI-powered plan review, intelligent image selection
#
# Used by:
# - PlanReviewService: Analyzes construction plans and provides feedback
# - ProductImageScraper: Intelligently selects best product images
#
# Setup instructions:
# 1. Go to https://console.anthropic.com
# 2. Sign up or log in
# 3. Navigate to "API Keys" in settings
# 4. Create a new API key
# 5. Note: API usage is pay-as-you-go after free credits
#
# Pricing: https://www.anthropic.com/pricing
# Docs: https://docs.anthropic.com/claude/reference/getting-started-with-the-api
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# -----------------------------------------------------------------------------
# XAI GROK INTEGRATION
# -----------------------------------------------------------------------------
# Required for: Grok AI analysis features
#
# Used by:
# - GrokService: Alternative AI analysis using xAI's Grok models
#
# Setup instructions:
# 1. Go to https://x.ai console (when available)
# 2. Create account and generate API key
# 3. Note: xAI API is in beta, availability may be limited
#
# More info: https://x.ai
XAI_API_KEY=your_xai_api_key

# -----------------------------------------------------------------------------
# GOOGLE SEARCH API - OPTIONAL
# -----------------------------------------------------------------------------
# Optional: Improves product image search quality
# Without these, the app will use basic fallback search methods
#
# Setup instructions:
# 1. Go to https://console.cloud.google.com
# 2. Create new project or select existing
# 3. Enable "Custom Search API"
# 4. Create credentials → API key
# 5. Go to https://programmablesearchengine.google.com
# 6. Create new search engine
# 7. Configure: Search the entire web, Image search ON
# 8. Copy the Search engine ID (CX)
#
# Pricing: 100 queries/day free, then $5 per 1000 queries
# More info: https://developers.google.com/custom-search/v1/overview
# GOOGLE_SEARCH_API_KEY=your_google_api_key
# GOOGLE_SEARCH_CX=your_custom_search_engine_id

# -----------------------------------------------------------------------------
# EXTERNAL API KEYS (SYSTEM-GENERATED)
# -----------------------------------------------------------------------------
# For integrations like Unreal Engine that need to call Trapid APIs
# These are generated via Rails console, not manually set:
#
# Generate a new external API key:
#   bin/rails runner "ExternalIntegration.create!(name: 'Unreal Engine', api_key: SecureRandom.hex(32))"
#
# External systems include this key in Authorization header:
#   Authorization: Bearer <api_key>
